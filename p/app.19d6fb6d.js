(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2YZa":function(e,t,n){"use strict";n.r(t);n("Gz3v");var r,a=n("q1tI"),o=n.n(a),c=n("i8i4"),l=n("/MKj"),i=n("i7Pf"),s=n("ANjH");!function(e){e[e.Forward=0]="Forward",e[e.Backward=1]="Backward"}(r||(r={}));var u,f,d=Object(i.b)("SET_CURRENT_TIME"),b=Object(i.b)("SET_NEW_TIME"),p=Object(i.b)("SET_SRC"),m=function(e){return function(t,n){var a=n(),o=a.player.currentTime,c=a.subtitles,l=function(e,t,n,a){if(0===e.length)return 0;console.log(t,n,a,e.length);for(var o,c=[],l=Math.floor(1e3*t)+n,i=0,s=e.length-1;i<=s;){var u=e[o=i+Math.floor((s-i)/2)];if(l<u.start)s=o-1;else{if(!(l>u.end)){c.push({index:o,subtitle:e[o]});break}i=o+1}}var f=0!==c.length?c[0].index:o;return 0===f&&a===r.Backward||f===e.length-1&&r.Forward?e[f].start-n:a===r.Backward?e[f-1].start-n:e[f+1].start-n}(c.subtitles,o,c.offset,e);t(b(l/1e3))}},v=Object(i.c)({currentTime:0,newTime:0,src:null},((u={})[d.type]=function(e,t){e.currentTime=t.payload},u[b.type]=function(e,t){e.newTime=t.payload},u[p.type]=function(e,t){e.src=t.payload},u)),h=Object(i.b)("SET_SUBTITLES"),E=Object(i.b)("SET_OFFSET"),O=Object(i.b)("TOGGLE_SUBS_SHOW"),j=Object(i.c)({subtitles:null,offset:0,isSubsShow:!0},((f={})[h.type]=function(e,t){e.subtitles=t.payload},f[E.type]=function(e,t){e.offset=t.payload},f[O.type]=function(e,t){e.isSubsShow=!e.isSubsShow},f)),y=Object(s.c)({player:v,subtitles:j}),T=Object(i.a)({reducer:y,devTools:!1}),w=(n("DqtN"),n("kLUL"),n("yzbm")),S=n("BGoP"),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},k=function(){var e=Object(l.b)(),t=Object(a.useState)(null),n=t[0],r=t[1],c=Object(a.useCallback)((function(t){t.forEach((function(t){if(t.type.indexOf("video")>=0){var n=URL.createObjectURL(t);e(p(n))}else r(t)}))}),[]);Object(a.useEffect)((function(){if(null!==n){var t=new FileReader;return t.readAsText(n),t.onloadend=function(){var n=Object(S.a)(t.result);e(h(n))},function(){}}}),[n]);var i=Object(w.a)({onDrop:c}),s=i.getRootProps,u=i.getInputProps,f=i.isDragActive;return o.a.createElement("form",g({className:"dropzone"},s()),o.a.createElement("input",g({},u())),f?o.a.createElement("p",null,"Drop files here..."):o.a.createElement("p",null,"Drag and drop .m4v and .srt here, or click to select files"))},_=(n("2ja3"),n("zPTE"),function(){var e=Object(l.b)(),t=Object(a.useRef)(null),n=Object(l.c)((function(e){return e.player})),r=n.src,c=n.newTime;Object(a.useEffect)((function(){t.current.currentTime=c}),[c]);return o.a.createElement("video",{className:"player",ref:t,onTimeUpdate:function(t){var n=t.target;e(d(n.currentTime))},controls:!0,autoPlay:!1},o.a.createElement("source",{src:r,type:"video/mp4"}))}),N=(n("rSOo"),function(){var e=Object(l.b)(),t=Object(a.useState)([]),n=t[0],c=t[1],i=Object(l.c)((function(e){return e})),s=i.player.currentTime,u=i.subtitles,f=u.subtitles,d=u.offset,b=u.isSubsShow;Object(a.useEffect)((function(){if(null!==f){var e=function(e,t,n){if(void 0===n&&(n=0),0===e.length)return[];for(var r=[],a=Math.floor(1e3*t)+n,o=0,c=e.length-1;o<=c;){var l=o+Math.floor((c-o)/2),i=e[l];if(a<i.start)c=l-1;else{if(!(a>i.end)){r.push({index:l,subtitle:e[l]});break}o=l+1}}return r}(f,s,d);c(e)}}),[s]);var p=Object(a.useCallback)((function(t){if("s"!==t.key&&"S"!==t.key||(t.preventDefault(),t.stopPropagation(),e(O())),t.key.startsWith("Arrow")){t.preventDefault(),t.stopPropagation();var n="ArrowRight"===t.key?r.Forward:r.Backward;e(m(n))}}),[s,f,d,b]);return Object(a.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}}),[f]),o.a.createElement("section",{className:"subtitles"},b?o.a.createElement("ul",{className:"subtitles__list"},n.map((function(e){var t=e.subtitle;return o.a.createElement("li",{key:""+t.start},t.text)}))):o.a.createElement("div",{className:"subtitles__subs-hidden-message"},"Subs is hidden"))}),z=(n("aBXX"),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.subtitles})).offset,n=function(t){t.preventDefault();var n=t.target;e(E(parseInt(n.value,10)))};return o.a.createElement("section",{className:"offset-slider"},o.a.createElement("div",{className:"offset-slider__value"},o.a.createElement("input",{type:"number",value:t,onChange:n})),o.a.createElement("div",{className:"offset-slider__slider"},o.a.createElement("input",{type:"range",min:-1e4,max:1e4,value:t,onChange:n})))}),A=function(){return o.a.createElement("section",{className:"player-layout"},o.a.createElement(z,null),o.a.createElement(_,null),o.a.createElement(N,null))},B=function(){var e=Object(l.c)((function(e){return e.player})).src,t=Object(l.c)((function(e){return e.subtitles})).subtitles;return a.createElement("main",{className:"app"},null===e||null===t?a.createElement(k,null):a.createElement(A,null))};Object(c.render)(a.createElement((function(){return a.createElement(a.StrictMode,null,a.createElement(l.a,{store:T},a.createElement(B,null)))}),null),document.getElementById("root"))},"2ja3":function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},DqtN:function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},Gz3v:function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},aBXX:function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},kLUL:function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},rSOo:function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)},zPTE:function(e,t,n){var r=n("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(r),e.hot.accept(void 0,r)}},[["2YZa",1,2]]]);