(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2YZa":function(e,t,n){"use strict";n.r(t),n("Gz3v");var l,r,u=n("q1tI"),c=n.n(u),a=n("i8i4"),o=(n("k0My"),n("DzJC")),s=n.n(o),v=n("h//d"),i=n("BkRI"),m=n.n(i),f=n("Y+p1"),d=n.n(f),p=n("WjpJ"),b=n.n(p),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function h(){}(r=l=l||{})[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT";var E=(h._generateId=function(){return""+this._currentId++},h._boardInit=function(){var e=this;return Array(16).fill(null).map(function(){return{value:0,id:e._generateId()}})},h.prototype.gameStateInit=function(){return{board:h._boardInit(),isGameOver:!1,isWin:!1,isMoved:!1}},h.prototype.gameStep=function(e,t){var n=e;return e.isWin||e.isGameOver?n:this.canIMakeMove(e,t)?(n=this.move(n,t),n=g(g({},this.checkWin(n)),{isMoved:!0})):g(g({},this.checkGameOver(n)),{isMoved:!1})},h.prototype.addTile=function(e){var t=e.board.map(function(e,t){return 0===e.value?t:-1}).filter(function(e){return 0<=e});if(0===t.length)return e;var n=t[Math.floor(Math.random()*t.length)];return e.board[n].value=2,g(g({},this.checkGameOver(e)),{isMoved:!1})},h.prototype._getRevercedRowIndexes=function(e,t){return e===l.RIGHT?b()(1,5).map(function(e){return 4*t+e-1}).reverse():e===l.LEFT?b()(1,5).map(function(e){return 4*t+e-1}):e===l.DOWN?b()(0,4).map(function(e){return 4*e+t}).reverse():e===l.UP?b()(0,4).map(function(e){return 4*e+t}):[]},h.prototype._mergeBoard=function(e,t){for(var n=e.board,r=null,a=0,o=t;a<o.length;a++){var i=o[a];if(0!==n[i].value)if(null===r||n[i].value!==n[r].value)0!==n[i].value&&(r=i);else{var u=n[r];n[r]=n[i],n[i]=u,n[r].value*=2,n[i].value=0,r=null}}return g(g({},e),{board:n})},h.prototype._shiftBoard=function(e,t){for(var n=e.board,r=0;r<=3;)if(0===n[t[r]].value){for(var a=null,o=0,i=t.slice(r,t.length);o<i.length;o++){var u=i[o];if(null!==a){if(0!==n[u].value){var l=n[a];n[a]=n[u],n[u]=l,a=u}}else a=u}r++}else r++;return g(g({},e),{board:n})},h.prototype.move=function(e,t){for(var n=m()(e),r=0,a=b()(0,4);r<a.length;r++){var o=a[r],i=this._getRevercedRowIndexes(t,o);n=this._mergeBoard(n,i),n=this._shiftBoard(n,i)}return n},h.prototype.canIMakeMove=function(e,t){var n=m()(e);if(void 0!==t){var r=this.move(n,t);return!1===d()(r.board,n.board)}var a=this.move(n,l.UP);if(!d()(a.board,n.board))return!0;var o=this.move(n,l.LEFT);if(!d()(o.board,n.board))return!0;var i=this.move(n,l.RIGHT);if(!d()(i.board,n.board))return!0;var u=this.move(n,l.DOWN);return!d()(u.board,n.board)},h.prototype.checkGameOver=function(e){var t=!1===this.canIMakeMove(e);return 0===e.board.filter(function(e){return 0<e.value}).length&&(t=!1),g(g({},e),{isGameOver:t})},h.prototype.checkWin=function(e){var t=0<e.board.filter(function(e){return 2048===e.value}).length;return g(g({},e),{isWin:t})},h._currentId=1,h);function O(){}function y(e){var t=e.value,n=Object(u.useState)(!1),r=n[0],a=n[1],o=Object(u.useRef)(t);return Object(u.useEffect)(function(){if(t>o.current){a(!0);var e=setTimeout(function(){return a(!1)},150);return o.current=t,function(){clearTimeout(e)}}o.current=0},[t]),c.a.createElement("div",{className:"board__tile "+(r?"board__tile_animate":""),style:{backgroundColor:M.colors[t],borderBottom:0===t?null:".6vh solid #404040"}},0!==t&&t)}function _(){return c.a.createElement("div",{className:"board__background"},Array(16).fill(null).map(function(e,t){return c.a.createElement("div",{key:t,className:"board__background_tile"})}))}function w(e){var t=e.board;return c.a.createElement("div",{className:"board"},c.a.createElement(_,null),c.a.createElement(j.a,{duration:M.moveAnimatetionDuration,className:"board__tiles"},t.map(function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(y,{value:e.value}))})))}function k(e){return c.a.createElement("span",{className:"emoji",role:"img","aria-label":e.label?e.label:"","aria-hidden":e.label?"false":"true"},e.symbol)}function I(e){var t=e.state,n=e.initDispatchCb;return c.a.createElement("div",{className:"done-game-popup"},c.a.createElement("div",{className:"done-game-popup__inner"},t.isWin&&c.a.createElement("h2",null,"You WIN Â ",c.a.createElement(k,{label:"win",symbol:"ðŸ˜€"})),t.isGameOver&&c.a.createElement("h2",null,"Game OVER Â ",c.a.createElement(k,{label:"win",symbol:"ðŸ˜µ"})),c.a.createElement("button",{className:"done-game-popup__button",onClick:n},"NEW GAME")))}function N(){var e=Object(u.useContext)(S),t=Object(u.useReducer)(e,null),n=t[0],r=t[1],a=Object(u.useCallback)(function(){return r({type:"init"})},[]);Object(u.useEffect)(function(){return a()},[]);var o=Object(u.useCallback)(s()(function(e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","w","d","a","s"].includes(e.key)){var t;switch(e.preventDefault(),e.key){case"ArrowRight":case"d":t=l.RIGHT;break;case"ArrowLeft":case"a":t=l.LEFT;break;case"ArrowUp":case"w":t=l.UP;break;default:t=l.DOWN}r({type:"game_step",moveDirection:t})}},150),[n]);Object(u.useEffect)(function(){null===n||!1===n.isMoved||n.isWin||n.isGameOver||setTimeout(function(){r({type:"add_tile"})},150)},[n]),Object(u.useEffect)(function(){null!==n&&(n.isWin&&console.log("YOURE WIN"),n.isGameOver&&console.log("YOURE LOOSE"))},[n]),Object(u.useEffect)(function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}},[]);var i=Object(v.a)({onSwipedUp:function(){return r({type:"game_step",moveDirection:l.UP})},onSwipedDown:function(){return r({type:"game_step",moveDirection:l.DOWN})},onSwipedLeft:function(){return r({type:"game_step",moveDirection:l.LEFT})},onSwipedRight:function(){return r({type:"game_step",moveDirection:l.RIGHT})}});return c.a.createElement("main",{className:"main-container"},null!==n&&c.a.createElement(u.Fragment,null,c.a.createElement("div",{className:"actions"},c.a.createElement("button",{className:"actions__reset-button",onClick:a},"RESET")),c.a.createElement("div",L({},i),c.a.createElement(w,{board:n.board}))),null!==n&&(n.isWin||n.isGameOver)&&c.a.createElement(I,{state:n,initDispatchCb:a}))}var D,T,G,R=(O.prototype.getState=function(){return null!==localStorage.getItem("state")?JSON.parse(localStorage.getItem("state")):null},O.prototype.saveState=function(e){localStorage.setItem("state",JSON.stringify(e))},O),S=c.a.createContext(null),W=(D={gameLogic:new E,storage:new R},T=D.gameLogic,G=D.storage,function(e,t){switch(t.type){case"init":var n=null==G?void 0:G.getState();if(console.log(n),null!=n&&!1===n.isGameOver&&!1===n.isWin)return n;var r=T.gameStateInit();return T.addTile(T.addTile(r));case"game_step":return T.gameStep(e,t.moveDirection);case"add_tile":var a=T.addTile(e);return null!=G&&G.saveState(a),a;default:return e}}),j=n("2O3R"),M={moveAnimatetionDuration:70,colors:{0:"transparent",2:"orange",4:"#ff1b70",8:"purple",16:"green",32:"teal",64:"crimson",128:"darkblue",256:"#34a797",512:"olive",1024:"blueviolet",2048:"red"}},L=(n("fVc2"),n("K0ZP"),n("M7DT"),function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)});Object(a.render)(c.a.createElement(function(){return c.a.createElement(c.a.StrictMode,null,c.a.createElement(S.Provider,{value:W},c.a.createElement(N,null)))},null),document.getElementById("root"))},Gz3v:function(){},K0ZP:function(){},M7DT:function(){},fVc2:function(){},k0My:function(){}},[["2YZa",1,2]]]);