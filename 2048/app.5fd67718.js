(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2YZa":function(e,t,n){"use strict";n.r(t),n("Gz3v");var l,r,c=n("q1tI"),s=n.n(c),a=n("i8i4"),o=(n("k0My"),n("DzJC")),m=n.n(o),v=n("h//d"),i=n("BkRI"),d=n.n(i),u=n("Y+p1"),f=n.n(u),p=n("WjpJ"),b=n.n(p),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function h(){}(r=l=l||{})[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT";var E=(h._generateId=function(){return""+this._currentId++},h._boardInit=function(){var e=this;return Array(16).fill(null).map(function(){return{value:0,id:e._generateId()}})},h.prototype.gameStateInit=function(){return{board:h._boardInit(),isGameOver:!1,isWin:!1,isMoved:!1}},h.prototype.gameStep=function(e,t){var n=e;return e.isWin||e.isGameOver?n:this.canIMakeMove(e,t)?(n=this.move(n,t),n=g(g({},this.checkWin(n)),{isMoved:!0})):g(g({},this.checkGameOver(n)),{isMoved:!1})},h.prototype.addTile=function(e){var t=e.board.map(function(e,t){return 0===e.value?t:-1}).filter(function(e){return 0<=e});if(0===t.length)return e;var n=t[Math.floor(Math.random()*t.length)];return e.board[n].value=2,g(g({},this.checkGameOver(e)),{isMoved:!1})},h.prototype._getRevercedRowIndexes=function(e,t){return e===l.RIGHT?b()(1,5).map(function(e){return 4*t+e-1}).reverse():e===l.LEFT?b()(1,5).map(function(e){return 4*t+e-1}):e===l.DOWN?b()(0,4).map(function(e){return 4*e+t}).reverse():e===l.UP?b()(0,4).map(function(e){return 4*e+t}):[]},h.prototype._mergeBoard=function(e,t){for(var n=e.board,r=null,a=0,o=t;a<o.length;a++){var i=o[a];if(0!==n[i].value)if(null===r||n[i].value!==n[r].value)0!==n[i].value&&(r=i);else{var u=n[r];n[r]=n[i],n[i]=u,n[r].value*=2,n[i].value=0,r=null}}return g(g({},e),{board:n})},h.prototype._shiftBoard=function(e,t){for(var n=e.board,r=0;r<=3;)if(0===n[t[r]].value){for(var a=null,o=0,i=t.slice(r,t.length);o<i.length;o++){var u=i[o];if(null!==a){if(0!==n[u].value){var l=n[a];n[a]=n[u],n[u]=l,a=u}}else a=u}r++}else r++;return g(g({},e),{board:n})},h.prototype.move=function(e,t){for(var n=d()(e),r=0,a=b()(0,4);r<a.length;r++){var o=a[r],i=this._getRevercedRowIndexes(t,o);n=this._mergeBoard(n,i),n=this._shiftBoard(n,i)}return n},h.prototype.canIMakeMove=function(e,t){var n=d()(e);if(void 0!==t){var r=this.move(n,t);return!1===f()(r.board,n.board)}var a=this.move(n,l.UP);if(!f()(a.board,n.board))return!0;var o=this.move(n,l.LEFT);if(!f()(o.board,n.board))return!0;var i=this.move(n,l.RIGHT);if(!f()(i.board,n.board))return!0;var u=this.move(n,l.DOWN);return!f()(u.board,n.board)},h.prototype.checkGameOver=function(e){var t=!1===this.canIMakeMove(e);return 0===e.board.filter(function(e){return 0<e.value}).length&&(t=!1),g(g({},e),{isGameOver:t})},h.prototype.checkWin=function(e){var t=0<e.board.filter(function(e){return 2048===e.value}).length;return g(g({},e),{isWin:t})},h._currentId=1,h);function y(){}function _(e){var t=e.value,n=Object(c.useState)(!1),r=n[0],a=n[1],o=Object(c.useRef)(t);return Object(c.useEffect)(function(){if(t>o.current){a(!0);var e=setTimeout(function(){return a(!1)},150);return o.current=t,function(){clearTimeout(e)}}o.current=0},[t]),s.a.createElement("div",{className:"board__tile "+(r?"board__tile_animate":""),style:{backgroundColor:W.colors[t],borderBottom:0===t?null:".6vh solid #404040"}},0!==t&&t)}function w(){return s.a.createElement("div",{className:"board__background"},Array(16).fill(null).map(function(e,t){return s.a.createElement("div",{key:t,className:"board__background_tile"})}))}function O(e){var t=e.board;return s.a.createElement("div",{className:"board"},s.a.createElement(w,null),s.a.createElement(j.a,{duration:W.moveAnimatetionDuration,className:"board__tiles"},t.map(function(e){return s.a.createElement("div",{key:e.id},s.a.createElement(_,{value:e.value}))})))}function k(e){return s.a.createElement("span",{className:"emoji",role:"img","aria-label":e.label?e.label:"","aria-hidden":e.label?"false":"true"},e.symbol)}function I(e){var t=e.state,n=e.newGameAction;return s.a.createElement("div",{className:"done-game-popup"},s.a.createElement("div",{className:"done-game-popup__inner done-game-popup__inner_animation"},t.isWin&&s.a.createElement("h2",null,"You WIN Â ",s.a.createElement(k,{label:"win",symbol:"ðŸ˜€"})),t.isGameOver&&s.a.createElement("h2",null,"Game OVER Â ",s.a.createElement(k,{label:"win",symbol:"ðŸ˜µ"})),s.a.createElement("button",{className:"done-game-popup__button",onClick:n},"NEW GAME")))}function T(){var e=Object(c.useContext)(M),t=Object(c.useReducer)(e,null),n=t[0],r=t[1],a=Object(c.useCallback)(function(){return r({type:"init"})},[]);function o(){return r({type:"reset"})}Object(c.useEffect)(function(){return a()},[]);var i=Object(c.useCallback)(m()(function(e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","w","d","a","s"].includes(e.key)){var t;switch(e.preventDefault(),e.key){case"ArrowRight":case"d":t=l.RIGHT;break;case"ArrowLeft":case"a":t=l.LEFT;break;case"ArrowUp":case"w":t=l.UP;break;default:t=l.DOWN}r({type:"game_step",moveDirection:t})}},150),[n]);Object(c.useEffect)(function(){null===n||!1===n.isMoved||n.isWin||n.isGameOver||setTimeout(function(){r({type:"add_tile"})},150)},[n]),Object(c.useEffect)(function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}},[]);var u=Object(v.a)({onSwipedUp:function(){return r({type:"game_step",moveDirection:l.UP})},onSwipedDown:function(){return r({type:"game_step",moveDirection:l.DOWN})},onSwipedLeft:function(){return r({type:"game_step",moveDirection:l.LEFT})},onSwipedRight:function(){return r({type:"game_step",moveDirection:l.RIGHT})}});return s.a.createElement("main",{className:"main-container"},null!==n&&s.a.createElement(c.Fragment,null,s.a.createElement("div",{className:"actions"},s.a.createElement("button",{className:"actions__reset-button",onClick:o},"RESET")),s.a.createElement("div",A({},u),s.a.createElement(O,{board:n.board}))),null!==n&&(n.isWin||n.isGameOver)&&s.a.createElement(I,{state:n,newGameAction:o}))}var G,N,S,D=(y.prototype.getState=function(){return null!==localStorage.getItem("state")?JSON.parse(localStorage.getItem("state")):null},y.prototype.saveState=function(e){localStorage.setItem("state",JSON.stringify(e))},y),M=s.a.createContext(null),R=(G={gameLogic:new E,storage:new D},N=G.gameLogic,S=G.storage,function(e,t){switch(t.type){case"init":var n=null==S?void 0:S.getState();if(null!=n&&!1===n.isGameOver&&!1===n.isWin)return n;var r=N.gameStateInit();return N.addTile(N.addTile(r));case"reset":return N.addTile(N.addTile(N.gameStateInit()));case"game_step":return N.gameStep(e,t.moveDirection);case"add_tile":var a=N.addTile(e);return null!=S&&S.saveState(a),a;default:return e}}),j=n("2O3R"),W={moveAnimatetionDuration:70,colors:{0:"transparent",2:"orange",4:"#ff1b70",8:"purple",16:"green",32:"teal",64:"crimson",128:"darkblue",256:"#34a797",512:"olive",1024:"blueviolet",2048:"red"}},A=(n("fVc2"),n("K0ZP"),n("M7DT"),function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)});Object(a.render)(s.a.createElement(function(){return s.a.createElement(s.a.StrictMode,null,s.a.createElement(M.Provider,{value:R},s.a.createElement(T,null)))},null),document.getElementById("root"))},Gz3v:function(){},K0ZP:function(){},M7DT:function(){},fVc2:function(){},k0My:function(){}},[["2YZa",1,2]]]);