(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2YZa":function(e,t,r){"use strict";r.r(t),r("Gz3v");var c,n,i=r("q1tI"),u=r.n(i),a=r("i8i4"),o=(r("k0My"),r("BkRI")),l=r.n(o),s=r("Y+p1"),d=r.n(s),v=r("WjpJ"),f=r.n(v),m=function(){return(m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function b(){}function p(){return u.a.createElement("div",{className:"board__background"},Array(16).fill(null).map(function(e,t){return u.a.createElement("div",{key:t,className:"board__background_tile"})}))}function h(e){var t=e.value,r=Object(i.useState)(!1),n=r[0],a=r[1],o=Object(i.useRef)(t);return Object(i.useEffect)(function(){if(t>o.current)return a(!0),setTimeout(function(){return a(!1)},150),void(o.current=t);o.current=0},[t]),u.a.createElement("div",{className:"board__tile "+(n?"board__tile_animate":""),style:{backgroundColor:R.colors[t],borderBottom:0===t?null:".6vh solid #404040"}},0!==t&&t)}function E(e){var t=e.board;return u.a.createElement("div",{className:"board"},u.a.createElement(p,null),u.a.createElement(M.a,{duration:R.moveAnimatetionDuration,className:"board__tiles"},t.map(function(e){return u.a.createElement("div",{key:e.id},u.a.createElement(h,{value:e.value}))})))}function g(){var e=Object(i.useContext)(y),t=Object(i.useReducer)(e,null),r=t[0],n=t[1],a=Object(i.useCallback)(function(){return n({type:"init"})},[]);Object(i.useEffect)(function(){return a()},[]);var o=Object(i.useCallback)(T()(function(e){if([39,37,38,40].includes(e.keyCode)){var t;switch(e.preventDefault(),e.keyCode){case 39:t=c.RIGHT;break;case 37:t=c.LEFT;break;case 38:t=c.UP;break;default:t=c.DOWN}n({type:"game_step",moveDirection:t})}},150),[r]);return Object(i.useEffect)(function(){null===r||!1===r.isMoved||r.isWin||r.isGameOver||setTimeout(function(){n({type:"add_tile"})},150)},[r]),Object(i.useEffect)(function(){null!==r&&(r.isWin&&console.log("YOURE WIN"),r.isGameOver&&console.log("YOURE LOOSE"))},[r]),Object(i.useEffect)(function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}},[]),u.a.createElement("main",{className:"main-container"},null!==r&&u.a.createElement(i.Fragment,null,u.a.createElement("div",{className:"actions"},u.a.createElement("button",{className:"actions__reset-button",onClick:a},"RESET")),u.a.createElement(E,{board:r.board})))}(n=c=c||{})[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT";var O,_,k=(b._generateId=function(){return""+this._currentId++},b._boardInit=function(){var e=this;return Array(16).fill(null).map(function(){return{value:0,id:e._generateId()}})},b.prototype.gameStateInit=function(){return{board:b._boardInit(),isGameOver:!1,isWin:!1,isMoved:!1}},b.prototype.gameStep=function(e,t){var r=e;return e.isWin||e.isGameOver?r:this.canIMakeMove(e,t)?(r=this.move(r,t),r=m(m({},this.checkWin(r)),{isMoved:!0})):m(m({},this.checkGameOver(r)),{isMoved:!1})},b.prototype.addTile=function(e){var t=e.board.map(function(e,t){return 0===e.value?t:-1}).filter(function(e){return 0<=e});if(0!==t.length){var r=t[Math.floor(Math.random()*t.length)];return e.board[r].value=2,m(m({},this.checkGameOver(e)),{isMoved:!1})}},b.prototype._getRevercedRowIndexes=function(e,t){return e===c.RIGHT?f()(1,5).map(function(e){return 4*t+e-1}).reverse():e===c.LEFT?f()(1,5).map(function(e){return 4*t+e-1}):e===c.DOWN?f()(0,4).map(function(e){return 4*e+t}).reverse():e===c.UP?f()(0,4).map(function(e){return 4*e+t}):[]},b.prototype._mergeBoard=function(e,t){for(var r=e.board,n=null,a=0,o=t;a<o.length;a++){var i=o[a];if(0!==r[i].value)if(null===n||r[i].value!==r[n].value)0!==r[i].value&&(n=i);else{var u=r[n];r[n]=r[i],r[i]=u,r[n].value*=2,r[i].value=0,n=null}}return m(m({},e),{board:r})},b.prototype._shiftBoard=function(e,t){for(var r=e.board,n=0;n<=3;)if(0===r[t[n]].value){for(var a=null,o=0,i=t.slice(n,t.length);o<i.length;o++){var u=i[o];if(null!==a){if(0!==r[u].value){var c=r[a];r[a]=r[u],r[u]=c,a=u}}else a=u}n++}else n++;return m(m({},e),{board:r})},b.prototype.move=function(e,t){for(var r=l()(e),n=0,a=f()(0,4);n<a.length;n++){var o=a[n],i=this._getRevercedRowIndexes(t,o);r=this._mergeBoard(r,i),r=this._shiftBoard(r,i)}return r},b.prototype.canIMakeMove=function(e,t){var r=l()(e);if(void 0!==t){var n=this.move(r,t);return!1===d()(n.board,r.board)}var a=this.move(r,c.UP);if(!d()(a.board,r.board))return!0;var o=this.move(r,c.LEFT);if(!d()(o.board,r.board))return!0;var i=this.move(r,c.RIGHT);if(!d()(i.board,r.board))return!0;var u=this.move(r,c.DOWN);return!d()(u.board,r.board)},b.prototype.checkGameOver=function(e){var t=!1===this.canIMakeMove(e);return m(m({},e),{isGameOver:t})},b.prototype.checkWin=function(e){var t=0<e.board.filter(function(e){return 2048===e.value}).length;return m(m({},e),{isWin:t})},b._currentId=1,b),y=u.a.createContext(null),I=(O={gameLogic:new k},_=O.gameLogic,function(e,t){switch(t.type){case"init":var r=_.gameStateInit();return _.addTile(_.addTile(r));case"game_step":return _.gameStep(e,t.moveDirection);case"add_tile":return _.addTile(e);default:return e}}),w=r("DzJC"),T=r.n(w),M=r("2O3R"),R={moveAnimatetionDuration:70,colors:{0:"transparent",2:"orange",4:"#ff1b70",8:"purple",16:"green",32:"teal",64:"crimson",128:"darkblue",256:"#34a797",512:"olive",1024:"blueviolet",2048:"red"}};r("fVc2"),Object(a.render)(u.a.createElement(function(){return u.a.createElement(u.a.StrictMode,null,u.a.createElement(y.Provider,{value:I},u.a.createElement(g,null)))},null),document.getElementById("root"))},Gz3v:function(){},fVc2:function(){},k0My:function(){}},[["2YZa",1,2]]]);