(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2YZa":function(e,t,r){"use strict";r.r(t),r("Gz3v");var c,n,u=r("q1tI"),s=r.n(u),a=r("i8i4"),o=(r("k0My"),r("DzJC")),d=r.n(o),v=r("h//d"),i=r("BkRI"),m=r.n(i),l=r("Y+p1"),f=r.n(l),p=r("WjpJ"),b=r.n(p),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function g(){}(n=c=c||{})[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT";var E=(g._generateId=function(){return""+this._currentId++},g._boardInit=function(){var e=this;return Array(16).fill(null).map(function(){return{value:0,id:e._generateId()}})},g.prototype.gameStateInit=function(){return{board:g._boardInit(),isGameOver:!1,isWin:!1,isMoved:!1}},g.prototype.gameStep=function(e,t){var r=e;return e.isWin||e.isGameOver?r:this.canIMakeMove(e,t)?(r=this.move(r,t),r=h(h({},this.checkWin(r)),{isMoved:!0})):h(h({},this.checkGameOver(r)),{isMoved:!1})},g.prototype.addTile=function(e){var t=e.board.map(function(e,t){return 0===e.value?t:-1}).filter(function(e){return 0<=e});if(0===t.length)return e;var r=t[Math.floor(Math.random()*t.length)];return e.board[r].value=2,h(h({},this.checkGameOver(e)),{isMoved:!1})},g.prototype._getRevercedRowIndexes=function(e,t){return e===c.RIGHT?b()(1,5).map(function(e){return 4*t+e-1}).reverse():e===c.LEFT?b()(1,5).map(function(e){return 4*t+e-1}):e===c.DOWN?b()(0,4).map(function(e){return 4*e+t}).reverse():e===c.UP?b()(0,4).map(function(e){return 4*e+t}):[]},g.prototype._mergeBoard=function(e,t){for(var r=e.board,n=null,a=0,o=t;a<o.length;a++){var i=o[a];if(0!==r[i].value)if(null===n||r[i].value!==r[n].value)0!==r[i].value&&(n=i);else{var l=r[n];r[n]=r[i],r[i]=l,r[n].value*=2,r[i].value=0,n=null}}return h(h({},e),{board:r})},g.prototype._shiftBoard=function(e,t){for(var r=e.board,n=0;n<=3;)if(0===r[t[n]].value){for(var a=null,o=0,i=t.slice(n,t.length);o<i.length;o++){var l=i[o];if(null!==a){if(0!==r[l].value){var c=r[a];r[a]=r[l],r[l]=c,a=l}}else a=l}n++}else n++;return h(h({},e),{board:r})},g.prototype.move=function(e,t){for(var r=m()(e),n=0,a=b()(0,4);n<a.length;n++){var o=a[n],i=this._getRevercedRowIndexes(t,o);r=this._mergeBoard(r,i),r=this._shiftBoard(r,i)}return r},g.prototype.canIMakeMove=function(e,t){var r=m()(e);if(void 0!==t){var n=this.move(r,t);return!1===f()(n.board,r.board)}var a=this.move(r,c.UP);if(!f()(a.board,r.board))return!0;var o=this.move(r,c.LEFT);if(!f()(o.board,r.board))return!0;var i=this.move(r,c.RIGHT);if(!f()(i.board,r.board))return!0;var l=this.move(r,c.DOWN);return!f()(l.board,r.board)},g.prototype.checkGameOver=function(e){var t=!1===this.canIMakeMove(e);return 0===e.board.filter(function(e){return 0<e.value}).length&&(t=!1),h(h({},e),{isGameOver:t})},g.prototype.checkWin=function(e){var t=0<e.board.filter(function(e){return 2048===e.value}).length;return h(h({},e),{isWin:t})},g._currentId=1,g);function y(){}function _(e){var t=e.value,r=Object(u.useState)(!1),n=r[0],a=r[1],o=Object(u.useRef)(t);return Object(u.useEffect)(function(){if(t>o.current){a(!0);var e=setTimeout(function(){return a(!1)},150);return o.current=t,function(){clearTimeout(e)}}o.current=0},[t]),s.a.createElement("div",{className:"board__tile "+(n?"board__tile_animate":""),style:{backgroundColor:j.colors[t],borderBottom:0===t?null:".6vh solid #404040"}},0!==t&&t)}function w(){return s.a.createElement("div",{className:"board__background"},Array(16).fill(null).map(function(e,t){return s.a.createElement("div",{key:t,className:"board__background_tile"})}))}function O(e){var t=e.board;return s.a.createElement("div",{className:"board"},s.a.createElement(w,null),s.a.createElement(R.a,{duration:j.moveAnimatetionDuration,className:"board__tiles"},t.map(function(e){return s.a.createElement("div",{key:e.id},s.a.createElement(_,{value:e.value}))})))}function k(e){return s.a.createElement("span",{className:"emoji",role:"img","aria-label":e.label?e.label:"","aria-hidden":e.label?"false":"true"},e.symbol)}function T(e){var t=e.state,r=e.newGameAction;return s.a.createElement("div",{className:"done-game-popup"},s.a.createElement("div",{className:"done-game-popup__inner done-game-popup__inner_animation"},t.isWin&&s.a.createElement("h2",null,"You WIN Â ",s.a.createElement(k,{label:"win",symbol:"ðŸ˜€"})),t.isGameOver&&s.a.createElement("h2",null,"Game OVER Â ",s.a.createElement(k,{label:"win",symbol:"ðŸ˜µ"})),s.a.createElement("button",{className:"done-game-popup__button",onClick:r},"NEW GAME")))}function I(){var e=Object(u.useContext)(A),t=Object(u.useReducer)(e,null),r=t[0],n=t[1],a=Object(u.useCallback)(function(){return n({type:"init"})},[]);function o(){return n({type:"reset"})}Object(u.useEffect)(function(){return a()},[]);var i=Object(u.useCallback)(d()(function(e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","w","d","a","s"].includes(e.key)){var t;switch(e.preventDefault(),e.key){case"ArrowRight":case"d":t=c.RIGHT;break;case"ArrowLeft":case"a":t=c.LEFT;break;case"ArrowUp":case"w":t=c.UP;break;default:t=c.DOWN}n({type:"game_step",moveDirection:t})}},150),[r]);Object(u.useEffect)(function(){null===r||!1===r.isMoved||r.isWin||r.isGameOver||setTimeout(function(){n({type:"add_tile"})},150)},[r]),Object(u.useEffect)(function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}},[]);var l=Object(v.a)({onSwipedUp:function(){return n({type:"game_step",moveDirection:c.UP})},onSwipedDown:function(){return n({type:"game_step",moveDirection:c.DOWN})},onSwipedLeft:function(){return n({type:"game_step",moveDirection:c.LEFT})},onSwipedRight:function(){return n({type:"game_step",moveDirection:c.RIGHT})}});return s.a.createElement("main",{className:"main-container"},null!==r&&s.a.createElement(u.Fragment,null,s.a.createElement("div",{className:"actions"},s.a.createElement("button",{className:"actions__reset-button",onClick:o},"RESET")),s.a.createElement("div",W({},l),s.a.createElement(O,{board:r.board}))),null!==r&&(r.isWin||r.isGameOver)&&s.a.createElement(T,{state:r,newGameAction:o}))}var G,N,S,D=(y.prototype.getState=function(){return null!==localStorage.getItem("state")?JSON.parse(localStorage.getItem("state")):null},y.prototype.saveState=function(e){localStorage.setItem("state",JSON.stringify(e))},y),A=s.a.createContext(null),M=(G={gameLogic:new E,storage:new D},N=G.gameLogic,S=G.storage,function(e,t){switch(t.type){case"init":var r=null==S?void 0:S.getState();if(null!=r&&!1===r.isGameOver&&!1===r.isWin)return r;var n=N.gameStateInit();return N.addTile(N.addTile(n));case"reset":return N.addTile(N.addTile(N.gameStateInit()));case"game_step":return N.gameStep(e,t.moveDirection);case"add_tile":var a=N.addTile(e);return null!=S&&S.saveState(a),a;default:return e}}),R=r("2O3R"),j={moveAnimatetionDuration:70,colors:{0:"transparent",2:"orange",4:"#ff1b70",8:"purple",16:"green",32:"teal",64:"crimson",128:"darkblue",256:"#34a797",512:"olive",1024:"blueviolet",2048:"red"}},W=(r("fVc2"),r("K0ZP"),r("M7DT"),function(){return(W=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)});Object(a.render)(s.a.createElement(function(){return s.a.createElement(s.a.StrictMode,null,s.a.createElement(A.Provider,{value:M},s.a.createElement(I,null)))},null),document.getElementById("root"))},Gz3v:function(e,t,r){var n=r("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},K0ZP:function(e,t,r){var n=r("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},M7DT:function(e,t,r){var n=r("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},fVc2:function(e,t,r){var n=r("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},k0My:function(e,t,r){var n=r("odzT")(e.i,{hmr:!0,reloadAll:!0,locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)}},[["2YZa",1,2]]]);