{"version":3,"sources":["../components/calendar/index.js","test_page/index.js"],"names":["modes","single","range","Calendar","classId","mode","onSelected","onClean","Error","state","currentDate","Date","now","singleDateSelected","dateLeft","dateRight","classCellDisabled","classCellHidden","classCellSingleSelected","classCellRangeLeftSelected","classCellRangeRightSelected","classCellRangeMiddleSelected","_domInit","_render","headerDateElem","document","querySelector","headerNextMonthBtnElem","headerPreviousMonthBtnElem","contentDays","querySelectorAll","actionClean","actionApply","_setupHeaderEvents","_setupCalendarEvents","_setupActionEvents","addEventListener","e","preventDefault","stopPropagation","_setNextMonth","_setPreviousMonth","_cleanSelected","_applySelected","setState","resultDate","date","_isDateLessThenOther","dateTimestamp","getTime","isShadow","currentTarget","attributes","toString","_selectSingleDay","_selectRangeDay","i","length","_clickCalendarDayHandler","bind","currentDateWithNextMonth","setMonth","getMonth","currentDateWithPreviousMonth","date1","date2","d1","_monthList","getFullYear","_date","setDate","getDate","day","getDay","month","year","daysNumber","_getDaysNumberInMonth","firstDayOfWeek","_getFirstDayOfWeek","daysNumberPreviosMonth","days","Array","fill","isLastRowShadowed","slice","filter","newState","Object","assign","currentMonth","_getMonth","currentYear","_getYear","innerHTML","_getCalendarDays","classList","add","forEach","index","result","console","log"],"mappings":"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","file":"test_page.81b39b57.js","sourceRoot":"..\\src\\pages","sourcesContent":["import \"./style.scss\";\r\n\r\nconst modes = {\r\n  single: \"single\",\r\n  range: \"range\"\r\n}\r\n\r\nclass Calendar {\r\n  constructor({ classId, mode = \"single\", onSelected, onClean }) {\r\n    this.classId = classId;\r\n    this.mode = mode;\r\n    this.onSelected = onSelected;\r\n    this.onClean = onClean;\r\n\r\n    if (mode !== \"single\" && mode !== \"range\")\r\n      throw new Error(\"init Calendar error: param `mode` should be `single` or `range`\");\r\n\r\n    this.state = {\r\n      currentDate: Date.now(),\r\n      singleDateSelected: null,\r\n      range: {\r\n        dateLeft: null,\r\n        dateRight: null,\r\n      }\r\n    }\r\n\r\n    this.classCellDisabled = \"calendar__content-cell_disabled\";\r\n    this.classCellHidden = \"calendar__content-cell_hidden\";\r\n    this.classCellSingleSelected = \"calendar__content-cell_select-one\";\r\n    this.classCellRangeLeftSelected = \"calendar__content-cell_select-range-left\";\r\n    this.classCellRangeRightSelected = \"calendar__content-cell_select-range-right\";\r\n    this.classCellRangeMiddleSelected = \"calendar__content-cell_select-range-middle\";\r\n\r\n    this._domInit();\r\n    this._render();\r\n  }\r\n\r\n  _domInit() {\r\n    this.headerDateElem = document.querySelector(`.${this.classId} .calendar__header-info`);\r\n    this.headerNextMonthBtnElem = document.querySelector(`.${this.classId} .calendar__header-btn-right`);\r\n    this.headerPreviousMonthBtnElem = document.querySelector(`.${this.classId} .calendar__header-btn-left`);\r\n\r\n    this.contentDays = document.querySelectorAll(`.${this.classId} .calendar__content-cell`);\r\n\r\n    this.actionClean = document.querySelector(`.${this.classId} .calendar__action-clean`);\r\n    this.actionApply = document.querySelector(`.${this.classId} .calendar__action-apply`);\r\n\r\n    this._setupHeaderEvents();\r\n    this._setupCalendarEvents();\r\n    this._setupActionEvents();\r\n  }\r\n\r\n  _setupHeaderEvents() {\r\n    this.headerNextMonthBtnElem.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      this._setNextMonth()\r\n    });\r\n\r\n    this.headerPreviousMonthBtnElem.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      this._setPreviousMonth()\r\n    });\r\n  }\r\n\r\n  _setupActionEvents() {\r\n    this.actionClean.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      this._cleanSelected();\r\n    });\r\n\r\n    this.actionApply.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      this._applySelected();\r\n    })\r\n  }\r\n\r\n  _cleanSelected() {\r\n    this.setState({\r\n      singleDateSelected: null,\r\n      range: { dateLeft: null, dateRight: null }\r\n    });\r\n\r\n    this.onClean && this.onClean();\r\n  }\r\n\r\n  _applySelected() {\r\n    if (this.mode === modes.single && this.state.singleDateSelected !== null) {\r\n      const resultDate = new Date(this.state.singleDateSelected);\r\n      this.onSelected && this.onSelected(resultDate);\r\n    }\r\n\r\n    const range = this.state.range;\r\n    if (\r\n      this.mode === modes.range\r\n      && range.dateLeft !== null\r\n      && range.dateRight !== null\r\n    ) {\r\n      this.onSelected && this.onSelected(range);\r\n    }\r\n  }\r\n\r\n  _selectSingleDay(date) {\r\n    this.setState({ singleDateSelected: date });\r\n  }\r\n\r\n  _selectRangeDay(date) {\r\n    const range = this.state.range;\r\n\r\n    if (range.dateLeft === null) {\r\n      this.setState({ range: { dateLeft: date, dateRight: null } });\r\n      return;\r\n    }\r\n\r\n    if (range.dateRight === null && this._isDateLessThenOther(range.dateLeft, date)) {\r\n      this.setState({ range: { dateLeft: range.dateLeft, dateRight: date } });\r\n      return;\r\n    }\r\n\r\n    if (this._isDateLessThenOther(date, range.dateLeft)) {\r\n      this.setState({ range: { dateLeft: date, dateRight: range.dateRight } });\r\n      return;\r\n    }\r\n\r\n    if (this._isDateLessThenOther(range.dateRight, date)) {\r\n      this.setState({ range: { dateLeft: range.dateLeft, dateRight: date } });\r\n      return;\r\n    }\r\n\r\n    const dateTimestamp = new Date(date).getTime();\r\n    if (new Date(range.dateRight).getTime() - dateTimestamp <= dateTimestamp - new Date(range.dateLeft).getTime()) {\r\n      this.setState({ range: { dateLeft: range.dateLeft, dateRight: date } });\r\n      return;\r\n    } else {\r\n      this.setState({ range: { dateLeft: date, dateRight: range.dateRight } });\r\n      return;\r\n    }\r\n  }\r\n\r\n  _clickCalendarDayHandler(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const isShadow = e.currentTarget.attributes[\"data-shadow\"];\r\n    if (isShadow) return;\r\n\r\n    const date = e.currentTarget.attributes[\"data-date\"].toString();\r\n\r\n    if (this.mode === \"single\") {\r\n      this._selectSingleDay(date);\r\n    } else if (this.mode === \"range\") {\r\n      this._selectRangeDay(date);\r\n    }\r\n  }\r\n\r\n  _setupCalendarEvents() {\r\n    for (let i = 0; i < this.contentDays.length; i += 1) {\r\n      this.contentDays[i].addEventListener(\"click\", this._clickCalendarDayHandler.bind(this))\r\n    }\r\n  }\r\n\r\n  _setNextMonth() {\r\n    const currentDate = new Date(this.state.currentDate);\r\n    const currentDateWithNextMonth = new Date(\r\n      currentDate.setMonth(currentDate.getMonth() + 1)\r\n    ).getTime();\r\n    this.setState({ currentDate: currentDateWithNextMonth });\r\n  }\r\n\r\n  _setPreviousMonth() {\r\n    const currentDate = new Date(this.state.currentDate);\r\n    const currentDateWithPreviousMonth = new Date(\r\n      currentDate.setMonth(currentDate.getMonth() - 1)\r\n    ).getTime();\r\n    this.setState({ currentDate: currentDateWithPreviousMonth });\r\n  }\r\n\r\n  _isDateLessThenOther(date1, date2) {\r\n    const d1 = new Date(date1).getTime();\r\n    const d2 = new Date(date2).getTime();\r\n    return d1 < d2;\r\n  }\r\n\r\n  _getMonth(date) {\r\n    const _monthList = [\"январь\", \"февраль\", \"март\", \"апрель\",\r\n      \"май\", \"июнь\", \"июль\", \"август\", \"сентябрь\",\r\n      \"окрябрь\", \"ноябрь\", \"декабрь\"];\r\n\r\n    return _monthList[new Date(date).getMonth()];\r\n  }\r\n\r\n  _getYear(date) {\r\n    return new Date(date).getFullYear();\r\n  }\r\n\r\n  _getDaysNumberInMonth(date) {\r\n    const _date = new Date(date)\r\n    _date.setMonth(new Date(date).getMonth() + 1);\r\n    _date.setDate(0);\r\n    return _date.getDate();\r\n  }\r\n\r\n  _getFirstDayOfWeek(date) {\r\n    const _date = new Date(date)\r\n    _date.setDate(1);\r\n    const day = _date.getDay();\r\n\r\n    if (day === 0) return 6; // day is sunday\r\n    return day - 1;\r\n  }\r\n\r\n  _getCalendarDays(date) {\r\n    const month = new Date(date).getMonth();\r\n    const year = new Date(date).getFullYear();\r\n    const daysNumber = this._getDaysNumberInMonth(date);\r\n    const firstDayOfWeek = this._getFirstDayOfWeek(date);\r\n    const daysNumberPreviosMonth = this._getDaysNumberInMonth(new Date(date).setMonth(month - 1))\r\n\r\n    const days = new Array(7 * 6).fill({ day: 0, isShadow: false });\r\n\r\n    // fill main calendar\r\n    let day = 1;\r\n    for (let i = firstDayOfWeek; i < (daysNumber + firstDayOfWeek); i++) {\r\n      days[i] = { day, date: new Date(year, month, day), isShadow: false };\r\n      day += 1;\r\n    }\r\n\r\n    // fill after main calendar\r\n    day = 1;\r\n    for (let i = (daysNumber + firstDayOfWeek); i < (7 * 6); i += 1) {\r\n      days[i] = { day, date: new Date(year, month + 1, day), isShadow: true };\r\n      day += 1;\r\n    }\r\n\r\n    // fill before main calendar\r\n    if (firstDayOfWeek !== 0) {\r\n      day = daysNumberPreviosMonth;\r\n      for (let i = firstDayOfWeek - 1; i >= 0; i -= 1) {\r\n        days[i] = { day, date: new Date(year, month - 1, day), isShadow: true };\r\n        day -= 1;\r\n      }\r\n    }\r\n\r\n    const isLastRowShadowed = days.slice(-7).filter(({ isShadow }) => isShadow === false).length === 0;\r\n    if (isLastRowShadowed) return days.slice(0, -7);\r\n    // if (isLastRowShadowed) console.log(days.slice(0, -7));\r\n\r\n    return days;\r\n  }\r\n\r\n  setState(newState) {\r\n    this.state = Object.assign(this.state, newState);\r\n\r\n    this._render();\r\n  }\r\n\r\n  _render() {\r\n    // render header\r\n    const currentMonth = this._getMonth(this.state.currentDate);\r\n    const currentYear = this._getYear(this.state.currentDate);\r\n    this.headerDateElem.innerHTML = `${currentMonth} ${currentYear}`;\r\n\r\n    // render calendar days\r\n    const days = this._getCalendarDays(this.state.currentDate);\r\n\r\n    for (let i = 0; i < days.length; i += 1) {\r\n      this.contentDays[i].innerHTML = `<div>${days[i].day}</div>`;\r\n      this.contentDays[i].classList = [\"calendar__content-cell\"];\r\n      this.contentDays[i].attributes[\"data-date\"] = days[i].date;\r\n      this.contentDays[i].attributes[\"data-shadow\"] = days[i].isShadow;\r\n\r\n      if (days[i].isShadow) {\r\n        this.contentDays[i].classList.add(this.classCellDisabled);\r\n      }\r\n    }\r\n    \r\n    const fiveWeekDays = 5 * 7;\r\n    // last week days was shadowed (hiden them)\r\n    if (days.length === fiveWeekDays) {\r\n      for (let i = 35; i < 42; i += 1) {\r\n        this.contentDays[i].classList.add(this.classCellHidden);\r\n      }\r\n    }\r\n\r\n    if (this.state.singleDateSelected !== null) {\r\n      days.forEach(({ date }, index) => {\r\n        if (date.toString() === this.state.singleDateSelected) {\r\n          this.contentDays[index]\r\n            .classList.add(this.classCellSingleSelected);\r\n        }\r\n      });\r\n    }\r\n\r\n    const range = this.state.range;\r\n    if (range.dateLeft !== null) {\r\n      days.forEach(({ date, isShadow }, index) => {\r\n        if (date.toString() === range.dateLeft && isShadow === false) {\r\n          this.contentDays[index]\r\n            .classList.add(this.classCellRangeLeftSelected);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (range.dateRight !== null) {\r\n      days.forEach(({ date, isShadow }, index) => {\r\n        if (date.toString() === range.dateRight && isShadow === false) {\r\n          this.contentDays[index]\r\n            .classList.add(this.classCellRangeRightSelected);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (\r\n      this.mode === modes.range\r\n      && range.dateLeft !== null\r\n      && range.dateRight !== null\r\n    ) {\r\n      days.forEach(({ date, isShadow }, index) => {\r\n        if (\r\n          this._isDateLessThenOther(range.dateLeft, date)\r\n          && this._isDateLessThenOther(date, range.dateRight)\r\n          && isShadow === false\r\n        ) {\r\n          this.contentDays[index]\r\n            .classList.add(this.classCellRangeMiddleSelected);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n// new Calendar({\r\n//   classId: \"calendar-1\",\r\n//   mode: modes.range,\r\n//   onSelected: (result) => console.log(result)\r\n// });\r\n\r\nexport {\r\n  Calendar,\r\n  modes\r\n}","import \"../../root.scss\";\r\n\r\n// import DateRange, {textFieldModes} from \"../../components/date_range\";\r\n// import initPieChart from \"../../components/pie_chart\";\r\n// import RoomDetailForm from \"../../components/room_detail_form\";\r\n// import \"../../components/room_features\";\r\n// import \"../../components/comments\";\r\n// import \"../../components/bullet_list\";\r\nimport Calendar, { modes } from \"../../components/calendar\";\r\n\r\nimport \"./style.scss\";\r\n\r\nnew Calendar({\r\n  classId: \"calendar-1\",\r\n  mode: modes.range,\r\n  onSelected: (result) => console.log(result)\r\n});\r\n\r\n// initPieChart();\r\n\r\n// new RoomDetailForm({ classId: \"id-room-detail-form\" });\r\n\r\n// new DateRange({\r\n//   classId: \"id-date-range-1\",\r\n//   textFieldMode: textFieldModes.single,\r\n//   onSelect: () => {\r\n//     console.log(\"select\");\r\n//   },\r\n//   onCalendarOpen: () => {\r\n//     console.log(\"calendar open\");\r\n//   }\r\n// });\r\n"]}